M=10;
w=-pi:0.1:pi;
Y=(sin(w*(M+0.5)))./sin(w/2);

plot(w, Y);